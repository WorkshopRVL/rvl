<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
        <script type="text/javascript" src="../../js/d3.js">
        </script>
        <style type="text/css">
        </style>
    </head>
    <body>
        <div id="body">
        </div>
        <script type="text/javascript">
            /* after an example from http://jsfiddle.net/Y9Qq3/2/ http://jsfiddle.net/Y9Qq3/2/ */
            
            var drawLinks = true; // choose whether only nodes should be drawn and layouted
            	
            
            var width = 800,
                height = 800,
            	markerWidth = 3,
                markerHeight = 3,
                cRadius = 12,
                refX = cRadius + (markerWidth * 2),
                refY = -Math.sqrt(cRadius),
                drSub = cRadius + refY
            ;
            
            					 
            
            	
            

            
            var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height);
            	
            	
            	d3.select("body").append("div").html("m = " );
				
  
            
            //d3.json("../../gen/json/graph-data.json", function(error, graph) {
			d3.json("graph-data.json", function(error, data) {
            	
            		  
            		  
            	 /* links / edges with label and tooltip */
            
            		var connectorGroup = svg
					//.selectAll("svg:g")
                    //.data(data)
                    //.enter()
					.append("svg:g")
            		;
            		
					
					connectorGroup.append("svg:circle").attr("r", 10).attr("cx",10).attr("cy",10).style("fill","green");
					
					/*

            		// var path = svg.selectAll(".link")
                    //.data(graph.links)
                    var path = connectorGroup.append("svg:path")
					.style("stroke", "red")
       				.style("fill", "none")
                    .attr("d", function (d) {
						
                        var dx = d.target.x - d.source.x,
                            dy = (d.target.y - d.source.y),
                            dr = Math.sqrt(dx * dx + dy * dy);
                        return "M" + d.source.x + "," + d.source.y + "A" + (dr - drSub) + "," + (dr - drSub) + " 0 0,1 " + d.target.x + "," + d.target.y; // an arc
                        
						//return "M" + d.source.x + "," + d.source.y + " L" + d.target.x + "," + d.target.y; // a line
						return "M" + 100 + "," + 100 + " L" + 100 + "," + 300; // a line
                    })
					;
					
					*/
            
            
			         var connectorLabelGroup = connectorGroup.append("svg:g")
            		.attr("class", "label")
            		;


					/*
					ICONSIZE = 0; // TODO does not actually work. hack!
					//symbol2
					connectorLabelGroup
					.attr("transform", function (d) {
						
						var dx = d.target.x - d.source.x,
                            dy = (d.target.y - d.source.y),
                            dr = Math.sqrt(dx * dx + dy * dy);
						
            			var xmid = d.source.x + (d.target.x - d.source.x - ICONSIZE) / 2;
            		    var ymid = d.source.y + (d.target.y - d.source.y - ICONSIZE) / 2;
						
						var c = 20;
						
						var m = -(dx/dy);
						
						var b = Math.sqrt((c*c)/(m*m+1));
						var a = Math.sqrt((c*c)-b*b); 
						
						var x,y;
						if (m>0) {
							x = xmid - b;
							y = ymid + a;
						}
						else {
							x = xmid + b;
							y = ymid - a;
						}
						

						
                        return "translate(" + x + "," + y + ")";
                    });*/
					

            });
                                                            
                                                        
                                            
                                
                    
        </script>
		
        <!-- somehow MUST NOT be before the script! -->
        
        </svg>
    </body>
</html>